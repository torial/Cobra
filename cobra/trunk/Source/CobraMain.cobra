class CobraMain

	def main is shared
		startTime = DateTime.now
		try
			try
				CobraCommandLine().run()
			catch ex as Exception
				.printEx(ex)
				CobraCore.dumpStack()
				.printEx(ex)
				print 'EXITED ON UNCAUGHT EXCEPTION'

		finally
			print 'Duration = [DateTime.now.subtract(startTime)]'

	def printEx(ex as Exception) is shared
		print
		print '[ex.getType().name]:'
		print ex.message
		print
